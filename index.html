
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all_nosearch.js"></script>
  </head>

  <body class="index" data-languages="[&quot;javascript&quot;,&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="shell">http</a>
        </div>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#intro" class="toc-h1 toc-link" data-title="Intro">Intro</a>
          </li>
          <li>
            <a href="#getting-started" class="toc-h1 toc-link" data-title="Getting started">Getting started</a>
          </li>
          <li>
            <a href="#get-a-delivery-quote" class="toc-h1 toc-link" data-title="Get a delivery quote">Get a delivery quote</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#required-json" class="toc-h2 toc-link" data-title="Required JSON">Required JSON</a>
                  </li>
                  <li>
                    <a href="#response-json" class="toc-h2 toc-link" data-title="Response JSON">Response JSON</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#create-a-new-delivery" class="toc-h1 toc-link" data-title="Create a new delivery">Create a new delivery</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#required-json-2" class="toc-h2 toc-link" data-title="Required JSON">Required JSON</a>
                  </li>
                  <li>
                    <a href="#response-json-2" class="toc-h2 toc-link" data-title="Response JSON">Response JSON</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#get-delivery-status" class="toc-h1 toc-link" data-title="Get delivery status">Get delivery status</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#required-json-3" class="toc-h2 toc-link" data-title="Required JSON">Required JSON</a>
                  </li>
                  <li>
                    <a href="#response-json-3" class="toc-h2 toc-link" data-title="Response JSON">Response JSON</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#cancel-delivery" class="toc-h1 toc-link" data-title="Cancel delivery">Cancel delivery</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#required-json-4" class="toc-h2 toc-link" data-title="Required JSON">Required JSON</a>
                  </li>
                  <li>
                    <a href="#response-json-4" class="toc-h2 toc-link" data-title="Response JSON">Response JSON</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#get-driver-location" class="toc-h1 toc-link" data-title="Get driver location">Get driver location</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#required-json-5" class="toc-h2 toc-link" data-title="Required JSON">Required JSON</a>
                  </li>
                  <li>
                    <a href="#response-json-5" class="toc-h2 toc-link" data-title="Response JSON">Response JSON</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a storeID</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='intro'>Intro</h1>
<p>Welcome to the Blip.delivery API! Our API endpoints can be bundled into any application using the npm module <code>blip-deliveries</code>.</p>

<p>This documents the use of the Blip.delivery API using server-side node.js, and will eventually document the library in other backend laguages.</p>

<p>To get started with a live account, contact Blip to get a <code>storeID</code>. Alternatively, you can play around with the functions in testmode, by replacing the <code>storeID</code> with <code>&#39;test&#39;</code></p>
<h1 id='getting-started'>Getting started</h1>
<blockquote>
<p>To authorize, use this code:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">blip</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'blip-deliveries'</span><span class="p">)(</span><span class="s1">'YOURSTOREID'</span><span class="p">);</span> <span class="c1">// Livemode</span>

<span class="kr">const</span> <span class="nx">blip</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'blip-deliveries'</span><span class="p">)(</span><span class="s1">'test'</span><span class="p">);</span> <span class="c1">// Testmode</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># Authorization is done on a per-call basis. No authorization setup is needed when using Http</span>
</code></pre>
<p>Blip uses a storeID to allow access to the API. You can register by <a href="http://www.blip.delivery/">contacting sales</a>.</p>

<aside class="notice">
You must replace <code>YOURSTOREID</code> with your own storeID.
</aside>
<h1 id='get-a-delivery-quote'>Get a delivery quote</h1>
<p>This retrieves a live price for a delivery, given two addresses. If your account uses subscription based pricing, use <code>getDeliveriesLeft</code> instead.</p>
<h3 id='required-json'>Required JSON</h3><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">blip</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'blip-deliveries'</span><span class="p">)(</span><span class="s1">'test'</span><span class="p">);</span> <span class="c1">// Testmode</span>

<span class="kr">const</span> <span class="nx">quote</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">blip</span><span class="p">.</span><span class="nx">getQuote</span><span class="p">({</span>
    <span class="na">pickupAddress</span><span class="p">:</span> <span class="s2">"156 Enfield Place, Mississauga, ON"</span><span class="p">,</span>
    <span class="na">deliveryAddress</span><span class="p">:</span> <span class="s2">"100 City Centre drive, Mississauga, ON"</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>https://api.blip.delivery/getDeliveryPrice <span class="c"># Live API endpoint</span>
https://us-central1-blip-testapp.cloudfunctions.net/getDeliveryPrice <span class="c"># Test API endpoint</span>

JSON body:

<span class="o">{</span>
    pickupAddress: <span class="s2">"156 Enfield Place, Mississauga, ON"</span>,
    deliveryAddress: <span class="s2">"100 City Centre drive, Mississauga, ON"</span>
<span class="o">}</span>
</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pickupAddress</td>
<td>The address of your pickup point. Include the locality + city</td>
</tr>
<tr>
<td>deliveryAddress</td>
<td>The address of your delivery point. Include the locality + city</td>
</tr>
</tbody></table>

<aside class="success">
Remember — Blip uses googlemaps to parse the address. Always ensure you enter the complete address, or we will be unable to verify the correct coordinates.
</aside>

<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"blipFee"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
  </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">337</span><span class="p">,</span><span class="w">
  </span><span class="s2">"totalPrice"</span><span class="p">:</span><span class="w"> </span><span class="mi">447</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='response-json'>Response JSON</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>blipFee</td>
<td>Integer fee of the API call</td>
</tr>
<tr>
<td>price</td>
<td>Integer price of the delivery</td>
</tr>
<tr>
<td>totalPrice</td>
<td>Integer price of the delivery charged to your account</td>
</tr>
</tbody></table>

<aside class="notice">
The prices returned are all in cents. eg. 421 == $ 4.21
</aside>
<h1 id='create-a-new-delivery'>Create a new delivery</h1>
<p>This creates a new delivery request, and charges the card on file. If you do not have any card on file with us, <a href="#">download</a> the Blip Store app, and update your card details.</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">blip</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'blip-deliveries'</span><span class="p">)(</span><span class="s1">'test'</span><span class="p">);</span> <span class="c1">//Replace 'test' with your storeID to switch to livemode</span>

<span class="c1">// All fields are required</span>

<span class="kr">const</span> <span class="nx">delivery</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">blip</span><span class="p">.</span><span class="nx">createNewDelivery</span><span class="p">({</span>
    <span class="s2">"delivery"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"instructions"</span><span class="p">:</span> <span class="s2">"Deliver to the lobby"</span><span class="p">,</span>
        <span class="s2">"contact"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"John Smith"</span><span class="p">,</span>
            <span class="s2">"number"</span><span class="p">:</span> <span class="s2">"+16479839837"</span>
        <span class="p">},</span>
        <span class="s2">"location"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"address"</span><span class="p">:</span> <span class="s2">"156 Enfield Place, Mississauga, ON"</span> 
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">"pickup"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"order_number"</span><span class="p">:</span> <span class="s2">"ABC123"</span><span class="p">,</span>
        <span class="s2">"instructions"</span><span class="p">:</span> <span class="s2">"Pickup from the main desk"</span><span class="p">,</span>
        <span class="s2">"contact"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"number"</span><span class="p">:</span> <span class="s2">"+16478229867"</span>
        <span class="p">},</span>
        <span class="s2">"location"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"address"</span><span class="p">:</span> <span class="s2">"200 Burnhamthorpe road west, Mississauga, ON"</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>https://api.blip.delivery/makeDeliveryRequest <span class="c"># Live API endpoint</span>

https://us-central1-blip-testapp.cloudfunctions.net/makeDeliveryRequest <span class="c"># Test API endpoint</span>

JSON body:

<span class="o">{</span>
    <span class="s2">"delivery"</span>: <span class="o">{</span>
        <span class="s2">"instructions"</span>: <span class="s2">"Deliver to the lobby"</span>,
        <span class="s2">"contact"</span>: <span class="o">{</span>
            <span class="s2">"name"</span>: <span class="s2">"John Smith"</span>,
            <span class="s2">"number"</span>: <span class="s2">"+16479839837"</span>
        <span class="o">}</span>,
        <span class="s2">"location"</span>: <span class="o">{</span>
            <span class="s2">"address"</span>: <span class="s2">"156 Enfield Place, Mississauga, ON"</span> 
        <span class="o">}</span>
    <span class="o">}</span>,
    <span class="s2">"pickup"</span>: <span class="o">{</span>
        <span class="s2">"order_number"</span>: <span class="s2">"ABC123"</span>,
        <span class="s2">"instructions"</span>: <span class="s2">"Pickup from the main desk"</span>,
        <span class="s2">"contact"</span>: <span class="o">{</span>
            <span class="s2">"number"</span>: <span class="s2">"+16478229867"</span>
        <span class="o">}</span>,
        <span class="s2">"location"</span>: <span class="o">{</span>
            <span class="s2">"address"</span>: <span class="s2">"200 Burnhamthorpe road west, Mississauga, ON"</span>
        <span class="o">}</span>
    <span class="o">}</span>,
    storeID: <span class="s2">"L12354Hhhf9-f"</span>
<span class="o">}</span>
</code></pre><h3 id='required-json-2'>Required JSON</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>delivery</td>
<td>A delivery object composed of a contact, location, and instruction.</td>
</tr>
<tr>
<td>pickup</td>
<td>A pickup object composed of an order number, contact, location, and instruction.</td>
</tr>
<tr>
<td>delivery.contact.name</td>
<td>String name of the reciever</td>
</tr>
<tr>
<td>delivery.contact.number</td>
<td>String phone number of the reciever</td>
</tr>
<tr>
<td>delivery.location.address</td>
<td>String address of the delivery location</td>
</tr>
<tr>
<td>delivery.instruction</td>
<td>String instruction for the driver upon reaching the delivery point</td>
</tr>
<tr>
<td>pickup.orderNumber</td>
<td>String order number for your own reference</td>
</tr>
<tr>
<td>pickup.instructions</td>
<td>String instructions for the driver upon reaching the pickup location</td>
</tr>
<tr>
<td>pickup.contact.number</td>
<td>String phone number the driver can call if there is a problem during pickup</td>
</tr>
<tr>
<td>pickup.location.address</td>
<td>String address of the pickup location</td>
</tr>
<tr>
<td>storeID (Http only)</td>
<td>String of the storeID you recieved when signing up with blip</td>
</tr>
</tbody></table>

<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"store"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"storeID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-LJlJ-xuYqEtgs6C1qky"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"storeName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bobs Brilliant BattleAxes"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"delivery"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"contact"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Smith"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+16479839837"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"156 Enfield Place, Mississauga"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">43.5907771</span><span class="p">,</span><span class="w">
            </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">-79.6340031</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"instructions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Deliver to the lobby"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"pickup"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"order_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC123"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contact"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+16478229867"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"200 Burnhamthorpe road west, Mississauga"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">43.5890505</span><span class="p">,</span><span class="w">
            </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">-79.64045229999999</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"instructions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pickup from the main desk"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"timeCreated"</span><span class="p">:</span><span class="w"> </span><span class="mi">1537389047</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"chargeID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ch_1DCCJvA4IkmlaKtpe3YcDT2G"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PCAPIIL"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='response-json-2'>Response JSON</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>delivery</td>
<td>A delivery object composed of a contact, location, and instruction.</td>
</tr>
<tr>
<td>pickup</td>
<td>A pickup object composed of an order number, contact, location, and instruction.</td>
</tr>
<tr>
<td>delivery.contact.name</td>
<td>String name of the reciever</td>
</tr>
<tr>
<td>delivery.contact.number</td>
<td>String phone number of the reciever</td>
</tr>
<tr>
<td>delivery.location.address</td>
<td>String address of the delivery location</td>
</tr>
<tr>
<td>delivery.location.latitude</td>
<td>Coordinate of the delivery location&#39;s latitude</td>
</tr>
<tr>
<td>delivery.location.longitude</td>
<td>Coordinate of the delivery location&#39;s longitude</td>
</tr>
<tr>
<td>delivery.instruction</td>
<td>String instruction for the driver upon reaching the delivery point</td>
</tr>
<tr>
<td>pickup.orderNumber</td>
<td>String order number for your own reference</td>
</tr>
<tr>
<td>pickup.instructions</td>
<td>String instructions for the driver upon reaching the pickup location</td>
</tr>
<tr>
<td>pickup.contact.number</td>
<td>String phone number the driver can call if there is a problem during pickup</td>
</tr>
<tr>
<td>pickup.location.address</td>
<td>String address of the pickup location</td>
</tr>
<tr>
<td>pickup.location.latitude</td>
<td>Coordinate of the pickup location&#39;s latitude</td>
</tr>
<tr>
<td>pickup.location.longitude</td>
<td>Coordinate of the pickup location&#39;s longitude</td>
</tr>
<tr>
<td>status.timeCreated</td>
<td>UNIX timestamp when the delivery request was generated</td>
</tr>
<tr>
<td>chargeID</td>
<td>An ID referencing the charge made to the card on file</td>
</tr>
<tr>
<td>id</td>
<td>The deliveryID of the generated delivery</td>
</tr>
</tbody></table>

<aside class="notice">
Remember to save the <code>deliveryID</code> in your database, so you can retrieve it's status later.
</aside>
<h1 id='get-delivery-status'>Get delivery status</h1>
<p>This retrieves a delivery object, and it&#39;s current status</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">blip</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'blip-deliveries'</span><span class="p">)(</span><span class="s1">'test'</span><span class="p">);</span> <span class="c1">//Replace 'test' with your storeID to switch to livemode</span>

<span class="kr">const</span> <span class="nx">status</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">blip</span><span class="p">.</span><span class="nx">getDeliveryStatus</span><span class="p">({</span>
    <span class="s2">"deliveryID"</span><span class="p">:</span> <span class="s2">"ASF781"</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>https://api.blip.delivery/getDeliveryStatus <span class="c"># Live API endpoint</span>

https://us-central1-blip-testapp.cloudfunctions.net/getDeliveryStatus <span class="c"># Test API endpoint</span>

JSON body:

<span class="o">{</span>
    <span class="s2">"deliveryID"</span>: <span class="s2">"ASF781"</span>,
    <span class="s2">"storeID"</span>: <span class="s2">"L12354Hhhf9-f"</span>
<span class="o">}</span>
</code></pre><h3 id='required-json-3'>Required JSON</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>deliveryID</td>
<td>String deliveryID of a delivery created using <code>createNewDelivery</code></td>
</tr>
<tr>
<td>storeID (Http only)</td>
<td>String of the storeID you recieved when signing up with blip</td>
</tr>
</tbody></table>

<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"timeTaken"</span><span class="p">:</span><span class="w"> </span><span class="mi">1537144441</span><span class="p">,</span><span class="w">
    </span><span class="s2">"timePickedUp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1537144845</span><span class="p">,</span><span class="w">
    </span><span class="s2">"timeDelivered"</span><span class="p">:</span><span class="w"> </span><span class="mi">1537145169</span><span class="p">,</span><span class="w">
    </span><span class="s2">"timeCreated"</span><span class="p">:</span><span class="w"> </span><span class="mi">1537144418</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pickupETA"</span><span class="p">:</span><span class="w"> </span><span class="mi">1537144845</span><span class="p">,</span><span class="w">
    </span><span class="s2">"dropoffETA"</span><span class="p">:</span><span class="w"> </span><span class="mi">1537144588</span><span class="p">,</span><span class="w">
    </span><span class="s2">"courier"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tai"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bafa0a6ffbbead086d2aff257bdae684"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lopez"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phoneNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+16479839837"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"photoURL"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://firebasestorage.googleapis.com/v0/b/blip-testapp.appspot.com/o/profilePictures%2F97548650-F8A1-4905-8D80-BDB4CBC6750C?alt=media&amp;token=2bc75dd7-79f5-4bab-b862-8719aa7c4bb9"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='response-json-3'>Response JSON</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>timeTaken</td>
<td>UNIX timestamp in seconds of the time the delivery was accepted by a courier</td>
</tr>
<tr>
<td>timePickedUp</td>
<td>UNIX timestamp in seconds of the time the delivery was picked up</td>
</tr>
<tr>
<td>timeDelivered</td>
<td>UNIX timestamp in seconds of the time the delivery was delivered</td>
</tr>
<tr>
<td>timeCreated</td>
<td>UNIX timestamp in seconds of the time the delivery was created</td>
</tr>
<tr>
<td>pickupETA</td>
<td>UNIX timestamp in seconds of an estimated time of pickup</td>
</tr>
<tr>
<td>dropoffETA</td>
<td>UNIX timestamp in seconds of an estimated time of dropoff</td>
</tr>
<tr>
<td>courier</td>
<td>An object containing the <code>firstName</code>, <code>id</code>, <code>lastName</code>, <code>phoneNumber</code> and <code>photoURL</code></td>
</tr>
<tr>
<td>courier.firstName</td>
<td>String firstname of the courier on the job</td>
</tr>
<tr>
<td>courier.lastName</td>
<td>String lastname of the courier on the job</td>
</tr>
<tr>
<td>courier.id</td>
<td>String of the courier&#39;s ID</td>
</tr>
<tr>
<td>courier.phoneNumber</td>
<td>String of the phone number of the courier</td>
</tr>
<tr>
<td>courier.photoURL</td>
<td>String of the URL for the courier&#39;s profile picture</td>
</tr>
</tbody></table>
<h1 id='cancel-delivery'>Cancel delivery</h1>
<p>You can cancel a delivery if it hasn&#39;t already been accepted by a courier. We will eventually add support for all types of cancellations, but currently only allow for cancellations before a courier has accepted a delivery request. A 100% refund will trigger upon cancellation, and your funds will appear within 5 business days.</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">blip</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'blip-deliveries'</span><span class="p">)(</span><span class="s1">'test'</span><span class="p">);</span> <span class="c1">//Replace 'test' with your storeID to switch to livemode</span>

<span class="c1">// A deliveryID is required</span>

<span class="kr">const</span> <span class="nx">cancellation</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">blip</span><span class="p">.</span><span class="nx">cancelDelivery</span><span class="p">({</span>
    <span class="s2">"deliveryID"</span><span class="p">:</span> <span class="s2">"ASF781"</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>https://api.blip.delivery/cancelDelivery <span class="c"># Live API endpoint</span>

https://us-central1-blip-testapp.cloudfunctions.net/cancelDelivery <span class="c"># Test API endpoint</span>

JSON body:

<span class="o">{</span>
    <span class="s2">"deliveryID"</span>: <span class="s2">"ASF781"</span>,
    <span class="s2">"storeID"</span>: <span class="s2">"L12354Hhhf9-f"</span>
<span class="o">}</span>
</code></pre><h3 id='required-json-4'>Required JSON</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>deliveryID</td>
<td>String deliveryID of a delivery created using <code>createNewDelivery</code></td>
</tr>
<tr>
<td>storeID (Http only)</td>
<td>String of the storeID you recieved when signing up with blip</td>
</tr>
</tbody></table>

<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"refund"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"re_1DCHmRA4IkmlaKtpRZC7i0mx"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"refund"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">571</span><span class="p">,</span><span class="w">
        </span><span class="s2">"balance_transaction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"txn_1DCHmRA4IkmlaKtpC6JdMukg"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"charge"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ch_1DCCJvA4IkmlaKtpe3YcDT2G"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="mi">1537410035</span><span class="p">,</span><span class="w">
        </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cad"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"receipt_number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"cancellation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"chargeID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ch_1DCCJvA4IkmlaKtpe3YcDT2G"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"delivery"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"contact"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Smith"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+16479839837"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"instructions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Drop off at security"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"156 Enfield Place, Mississauga"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">43.5907771</span><span class="p">,</span><span class="w">
                </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">-79.6340031</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"earnings"</span><span class="p">:</span><span class="w"> </span><span class="mi">514</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pickup"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"contact"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"James Bean"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+16479839836"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"instructions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pickup from main desk"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"200 Burnhamthorpe road west, Mississauga"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">43.5890505</span><span class="p">,</span><span class="w">
                </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">-79.64045229999999</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"order_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ASF715N"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"timeCreated"</span><span class="p">:</span><span class="w"> </span><span class="mi">1537389047</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"store"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"storeID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-LJlJ-xuYqEtgs6C1qky"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"storeName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bobs Brilliant BattleAxes"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='response-json-4'>Response JSON</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>refund</td>
<td>A refund object verifying a successful refund was made</td>
</tr>
<tr>
<td>cancellation</td>
<td>A delivery object similar to one returned by <code>createNewDelivery</code></td>
</tr>
</tbody></table>
<h1 id='get-driver-location'>Get driver location</h1>
<p>After a delivery has been accepted, it contains a <code>courier</code> property. The <code>courier</code> is a driver that has been dispatched, who&#39;s location updates every 500-700 meters. This function should not be called more than once every 3 minutes, as doing so may result in excess charges to your account. Furthermore, a status code of <code>400</code> will be returned if the <code>deliveryID</code> references a delivery that has not been picked up. To ensure a status code of <code>200</code>, make sure to call <code>getDeliveryStatus</code> first, and check if it contains a <code>courier</code> property.</p>

<p>To get the current location of your driver, use <code>getDriverLocation(options)</code> where <code>options</code> is an object containing the <code>deliveryID</code> of the delivery to track</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">blip</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'blip-deliveries'</span><span class="p">)(</span><span class="s1">'test'</span><span class="p">);</span> <span class="c1">//Replace 'test' with your storeID to switch to livemode</span>

<span class="c1">// A deliveryID is required</span>

<span class="kr">const</span> <span class="nx">status</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">blip</span><span class="p">.</span><span class="nx">getDriverLocation</span><span class="p">({</span>
    <span class="s2">"deliveryID"</span><span class="p">:</span> <span class="s2">"ASF781"</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>https://api.blip.delivery/getDriverLocation <span class="c"># Live API endpoint</span>

https://us-central1-blip-testapp.cloudfunctions.net/getDriverLocation <span class="c"># Test API endpoint</span>

JSON body:

<span class="o">{</span>
    <span class="s2">"deliveryID"</span>: <span class="s2">"ASF781"</span>,
    <span class="s2">"storeID"</span>: <span class="s2">"L12354Hhhf9-f"</span>
<span class="o">}</span>
</code></pre><h3 id='required-json-5'>Required JSON</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>deliveryID</td>
<td>String deliveryID of a delivery created using <code>createNewDelivery</code></td>
</tr>
<tr>
<td>storeID (Http only)</td>
<td>String of the storeID you recieved when signing up with blip</td>
</tr>
</tbody></table>

<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">43.5890505</span><span class="p">,</span><span class="w">
    </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="mf">-79.6404522</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='response-json-5'>Response JSON</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>latitude</td>
<td>Number indicating the current latitude of the driver on your job</td>
</tr>
<tr>
<td>longitude</td>
<td>Number indicating the current longitude of the driver on your job</td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1>
<aside class="notice">
Currently, we only support the error code 400. Support for other error codes will be soon added.
</aside>

<p>The Blip API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- An error occured, check <code>response.error</code> for a string explanation of the reason the error occured.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="shell">http</a>
          </div>
      </div>
    </div>
  </body>
</html>
